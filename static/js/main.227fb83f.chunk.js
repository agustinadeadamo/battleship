(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{486:function(n,e,t){},498:function(n,e,t){"use strict";t.r(e);t(200),t(201),t(202),t(203),t(204),t(205),t(206),t(207),t(208),t(209),t(210),t(211),t(212),t(213),t(214),t(215),t(216),t(217),t(218),t(219),t(220),t(221),t(222),t(223),t(224),t(226),t(227),t(93),t(228),t(229),t(230),t(231),t(232),t(233),t(234),t(235),t(236),t(237),t(238),t(239),t(240),t(241),t(242),t(244),t(245),t(247),t(248),t(249),t(126),t(250),t(251),t(252),t(253),t(254),t(255),t(256),t(257),t(258),t(259),t(260),t(261),t(262),t(263),t(264),t(265),t(266),t(267),t(268),t(269),t(270),t(271),t(272),t(273),t(274),t(275),t(277),t(278),t(280),t(281),t(282),t(283),t(284),t(285),t(286),t(287),t(288),t(289),t(290),t(291),t(292),t(293),t(294),t(295),t(296),t(297),t(298),t(299),t(301),t(302),t(303),t(304),t(305),t(307),t(308),t(309),t(310),t(311),t(312),t(313),t(314),t(315),t(316),t(317),t(177),t(318),t(319),t(179),t(320),t(321),t(322),t(323),t(180),t(324),t(325),t(326),t(327),t(328),t(329),t(330),t(331),t(332),t(333),t(334),t(335),t(336),t(337),t(338),t(339),t(340),t(341),t(342),t(343),t(344),t(345),t(346),t(347),t(348),t(349),t(351),t(352),t(353),t(354),t(355),t(356),t(357),t(358),t(359),t(360),t(361),t(362),t(363),t(364),t(365),t(366),t(367),t(368),t(369),t(370),t(371),t(372),t(373),t(374),t(375),t(376),t(377),t(378),t(379),t(380),t(381),t(382),t(383),t(134),t(384),t(385),t(387),t(388),t(389),t(390),t(391),t(393),t(394),t(395),t(396),t(397),t(398),t(399),t(400),t(402),t(403),t(404),t(405),t(406),t(407),t(408),t(409),t(410),t(411),t(412),t(413),t(414),t(415),t(416),t(417),t(418),t(419),t(420),t(421),t(422),t(423),t(424),t(425),t(426),t(428),t(430),t(431),t(432),t(433),t(434),t(435),t(436),t(437),t(438),t(439),t(440),t(441),t(442),t(443),t(444),t(445),t(446),t(447),t(448),t(449),t(450),t(451),t(452),t(453),t(454),t(455),t(456),t(457),t(458),t(459),t(460),t(462),t(464),t(465),t(466),t(467),t(468),t(469),t(470),t(471),t(472),t(473),t(474),t(475),t(476),t(477),t(478),t(480),t(191);var r=t(2),i=t(1),a=t.n(i),c=t(108),s=t.n(c),o=(t(486),t(22)),d=t(199),u=t(66),l=t(194),b=(t(195),function(){var n=[];return n}()),h=t(43),j="UPDATE_USER_GRID",p="UPDATE_COMPUTER_GRID",f="UPDATE_USER_NAME",m="UPDATE_GAME_STARTED",g="UPDATE_WINNER",O=function(n){return{type:f,payload:n}},x={user:"",gameStarted:!1,gridWidth:10,gridHeight:10,userGrid:[],computerGrid:[],winner:"",ships:[{name:"carrier",spaces:["carrier-1-1","carrier-1-2","carrier-1-3","carrier-1-4"],taken:!1,status:"empty",id:1,enable:!0,selected:0,directions:[[0,1,2,3],[0,10,20,30]]},{name:"cruisers",spaces:["cruisers-1-1","cruisers-1-2","cruisers-1-3"],taken:!1,status:"empty",id:2,enable:!0,selected:0,directions:[[0,1,2],[0,10,20]]},{name:"cruisers",spaces:["cruisers-2-1","cruisers-2-2","cruisers-2-3"],taken:!1,status:"empty",id:3,enable:!0,selected:0,directions:[[0,1,2],[0,10,20]]},{name:"cruisers",spaces:["cruisers-3-1","cruisers-3-2","cruisers-3-3"],taken:!1,status:"empty",id:4,enable:!0,selected:0,directions:[[0,1,2],[0,10,20]]},{name:"submarine",spaces:["submarine-1","submarine-2"],taken:!1,status:"empty",id:5,enable:!0,selected:0,directions:[[0,1],[0,10]]}]},v=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return Object(h.a)(Object(h.a)({},n),{},{userGrid:e.payload});case p:return Object(h.a)(Object(h.a)({},n),{},{computerGrid:e.payload});case f:return Object(h.a)(Object(h.a)({},n),{},{user:e.payload});case m:return Object(h.a)(Object(h.a)({},n),{},{gameStarted:e.payload});case g:return Object(h.a)(Object(h.a)({},n),{},{winner:e.payload});default:return n}},y=Object(u.createStore)(v,Object(l.composeWithDevTools)(u.applyMiddleware.apply(void 0,Object(d.a)(b)))),w=t(86),N=t(20),k=function(n){var e=n.path,t=n.component,i=Object(o.c)((function(n){return n.user}));return null!==i&&""!==i?Object(r.jsx)(N.b,{"data-testid":"private-route",exact:!0,path:e,component:t}):Object(r.jsx)(N.a,{to:"/"})},E=t(41),S=t(30),C=t(31),A={grey:"#A6A5A5",orange:"#FC8F29",lightBlue:"#29C9FC",red:"#F92B2B",green:"#52CEB7",white:"#FFFFFF"};function M(){var n=Object(S.a)(["\n    color: ",";\n"]);return M=function(){return n},n}function T(){var n=Object(S.a)(["\n    width: 100%;\n    border: 1px solid ",";\n    color: ",";\n    height: 40px;\n    padding: 0 10px;\n"]);return T=function(){return n},n}var G=C.b.input(T(),A.grey,A.grey),P=C.b.p(M(),A.red),U=function(n){var e=n.value,t=n.maxLength,i=n.placeholder,a=n.type,c=n.onChangeValue,s=n.messageError,o=n.showMessageError;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(G,{onChange:function(n){return function(n){var e=n.target.value;c(e)}(n)},value:e,maxLength:t,type:a,placeholder:i,"data-testid":"input-component"}),o&&Object(r.jsx)(P,{"data-testid":"message-error",className:"test",children:s})]})};U.defaultProps={maxLength:100,placeholder:"",type:"text",messageError:"",showMessageError:!1};var R=U;function D(){var n=Object(S.a)(['\n  width: 100%;\n  display: inline-block;\n  position: relative;\n  display: flex;\n  flex-wrap: wrap;\n\n  &:before {\n    content: "";\n    display: block;\n    padding-top: 100%;\n  }\n\n  .content {\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    display: flex;\n    flex-wrap: wrap;\n  }\n  \n  &.grid-user {\n    .hit {\n      background-color: ',";\n    }\n\n    .missed {\n      background-color: ",";\n    }\n\n    .destroyed {\n      background-color: ",";\n    }\n\n    .taken {\n      background-color: ",";\n    }\n  }\n\n  .cell {\n    width: 10%;\n    height: 10%;\n    ","\n\n    &.empty {\n      border: 2px solid ",";\n    }\n\n  }\n"]);return D=function(){return n},n}var F=C.b.div(D(),A.orange,A.lightBlue,A.red,A.grey,(function(n){return n.enableGrid&&"cursor: pointer;"}),A.grey),J=function(n){var e=n.gridName,t=n.onClickCell,i=n.enableGrid,a=n.grid;return Object(r.jsx)("div",{children:Object(r.jsx)(F,{enableGrid:i,"data-testid":"grid-component",gridName:e,className:"grid-".concat(e),children:Object(r.jsx)("div",{className:"content",children:a&&a.map((function(n){return Object(r.jsx)("div",{role:"presentation",onClick:function(){return i&&t(n)},id:n.id,className:"cell ".concat(n.status),"data-testid":"cell-component ".concat(n.cellContent)},n.id)}))})})})};J.defaultProps={enableGrid:!1,onClickCell:function(){},grid:[]};var _=J;function B(){var n=Object(S.a)(["\n  width: 100%;\n\n  .title, .instructions {\n    width: 100%;\n    text-align: center;\n    margin: 30px 0;\n  }\n\n  .configuration {\n    width: 90%;\n    max-width: 1240px;\n    margin: 0 auto;\n    display: flex;\n    justify-content: space-arround;\n    flex-wrap: wrap;\n\n    .first-column {\n      width: 100%;\n  \n      @media (min-width: 1140px) {\n        width: 70%;\n      }\n  \n      .grid-container {\n        width: 100%;\n        max-width: 600px;\n        margin: 20px auto;\n  \n        @media (min-width: 1140px) {\n          margin: 0;\n        }\n      }\n    }\n  \n    .second-column {\n      width: 100%;\n  \n      @media (min-width: 1140px) {\n        width: 30%;\n      }\n  \n      .actions {\n        width: 100%;\n        max-width: 600px;\n        margin: 20px auto;\n  \n        @media (min-width: 1140px) {\n          margin: 0;\n        }\n\n        .buttons-container {\n          margin: 30px;\n        }\n      }\n    }\n  }\n"]);return B=function(){return n},n}var I=C.b.div(B()),W=function(){var n=Object(i.useState)(null),e=Object(E.a)(n,2),t=e[0],a=e[1],c=Object(i.useState)(null),s=Object(E.a)(c,2),d=s[0],u=s[1],l=Object(i.useState)(!1),b=Object(E.a)(l,2),h=b[0],f=b[1],g=Object(N.g)(),x=Object(o.c)((function(n){return n.gridWidth})),v=Object(o.c)((function(n){return n.gridHeight})),y=Object(o.c)((function(n){return n.user})),w=Object(o.c)((function(n){return n.ships})),k=Object(o.b)(),S=Object(i.useRef)([]),C=Object(i.useRef)([]),A=function n(e,t){if(Array.isArray(t)){var r=1,i=Math.floor(Math.random()*e.directions.length),a=e.directions[i];0===i&&(r=1),1===i&&(r=10);var c=t.length-e.directions[0].length*r,s=Math.floor(Math.random()*c),o=a.some((function(n){return t[s+n].taken})),d=a.some((function(n){return(s+n)%10===9})),u=a.some((function(n){return(s+n)%10===0})),l=JSON.parse(JSON.stringify(t));return o||d||u?n(e,t):(a.forEach((function(n,t){l[s+n].taken=!0,l[s+n].status="taken",l[s+n].cellContent=e.spaces[t]})),l)}return[]},M=function(){for(var n=[],e=0;e<x*v;e+=1)n.push({id:e,status:"empty",taken:!1,cellContent:"sea"});return n};Object(i.useEffect)((function(){var n=M();a(n),u(n)}),[]);var T=function(n){var e=n;return w.forEach((function(n){e=A(n,e)})),e};Object(i.useEffect)((function(){if(Array.isArray(t)&&t.length>0&&Array.isArray(w)&&w.length>0&&0===S.current.length){S.current=t;var n=T(t);a(n)}}),[t,w]),Object(i.useEffect)((function(){if(Array.isArray(d)&&d.length>0&&Array.isArray(w)&&w.length>0&&0===C.current.length){C.current=d;var n=T(d);u(n)}}),[d,w]);var G=function(){var n=!0;""===y&&(n=!1,f(!0)),n&&(k(O(y)),k({type:j,payload:t}),k(function(n){return{type:p,payload:n}}(d)),k(function(n){return{type:m,payload:n}}(!0)),g.push("/game"))};return Object(r.jsxs)(I,{children:[Object(r.jsxs)("div",{className:"title",children:[Object(r.jsx)("h1",{children:"Battleship"}),Object(r.jsx)("h3",{children:"Configuration"})]}),Object(r.jsx)("div",{className:"instructions",children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"Enter your user name."}),Object(r.jsx)("li",{children:"Place you ships on the board the way you prefer."}),Object(r.jsx)("li",{children:"Start the game !"})]})}),Object(r.jsxs)("div",{className:"configuration",children:[Object(r.jsx)("div",{className:"first-column",children:Object(r.jsx)("div",{"data-testid":"grid-container",className:"grid-container",children:Object(r.jsx)(_,{"data-testid":"grid-grid",enableGrid:!1,grid:t,gridName:"user"})})}),Object(r.jsx)("div",{className:"second-column","data-testid":"actions-container",children:Object(r.jsxs)("div",{className:"actions",children:[Object(r.jsx)(R,{messageError:"You must add a user name",showMessageError:h,"data-testid":"username-input",placeholder:"Insert user name here",onChangeValue:function(n){return""!==(e=n)&&f(!1),void k(O(e));var e},value:y}),Object(r.jsxs)("div",{className:"buttons-container",children:[Object(r.jsx)("button",{"data-testid":"change-positions-button",type:"button",onClick:function(){return function(){S.current=[];var n=M();a(n)}()},children:" Change position "}),Object(r.jsx)("button",{className:"dark",type:"button","data-testid":"start-game",onClick:function(){return G()},children:"Start Game"})]})]})})]})]})};function z(){var n=Object(S.a)(["\n  width: 100%;\n  max-width: 300px;\n  height: 50px;\n  position: fixed;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n  color: ",";\n  font-size: 13px;\n  background: ",";\n  font-weight: 600;\n  border-radius: 6px;\n  text-align: center;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  &.show {\n    top: 0; \n    transition: all 0.5s ease 0s; \n    -webkit-transition: all 0,5s ease 0s; \n  }\n\n  &.hide {\n    top: -50%; transition: all 0.5s ease 0s; -webkit-transition: all 0.5s ease 0s;\n  }\n"]);return z=function(){return n},n}var L=C.b.div(z(),A.white,A.green),H=function(n){var e=n.copy,t=n.show,a=n.hidePopUp;return Object(i.useEffect)((function(){var n=null;return t&&(n=setTimeout((function(){a()}),1e3)),function(){return clearTimeout(n)}}),[t]),Object(r.jsx)(L,{"data-testid":"popUp-component",className:"".concat(t?"show":"hide"),show:t,children:e})};function V(){var n=Object(S.a)(["\nwidth: 90%;\nmax-width: 1240px;\nmargin: 0 auto;\n\n  .title {\n    width: 100%;\n    text-align: center;\n    margin: 30px 0;\n  }\n\n  .player-turn {\n    text-align: center;\n  }\n\n  .grids-container {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n\n    .grid-name {\n      margin: 20px 0;\n      text-align: center;\n    }\n\n    .first-column, .second-column {\n      width: 100%;\n  \n      @media (min-width: 1140px) {\n        width: 45%;\n      }\n  \n      .grid-container {\n        width: 100%;\n        max-width: 600px;\n        margin: 20px auto;\n  \n        @media (min-width: 1140px) {\n          margin: 20px 0;\n        }\n      }\n    }\n  }\n\n  .button-row {\n    width: 100%;\n\n    .button-container {\n      width: 30%;\n      max-width: 300px;\n      margin: 30px auto;\n    }\n  }\n"]);return V=function(){return n},n}var Y=C.b.div(V()),q=function(){var n=Object(i.useState)(null),e=Object(E.a)(n,2),t=e[0],a=e[1],c=Object(i.useState)(null),s=Object(E.a)(c,2),d=s[0],u=s[1],l=Object(i.useState)(!0),b=Object(E.a)(l,2),h=b[0],j=b[1],p=Object(i.useState)([]),f=Object(E.a)(p,2),m=f[0],O=f[1],x=Object(i.useState)([]),v=Object(E.a)(x,2),y=v[0],w=v[1],k=Object(i.useState)(""),S=Object(E.a)(k,2),C=S[0],A=S[1],M=Object(i.useState)(!1),T=Object(E.a)(M,2),G=T[0],P=T[1],U=Object(i.useState)(!0),R=Object(E.a)(U,2),D=R[0],F=R[1],J=Object(o.c)((function(n){return n.userGrid})),B=Object(o.c)((function(n){return n.computerGrid})),I=Object(o.c)((function(n){return n.user})),W=Object(o.c)((function(n){return n.ships})),z=Object(o.b)(),L=Object(i.useRef)(0),V=Object(i.useRef)(!1),q=Object(i.useRef)(0),K=Object(i.useRef)(0),Q=Object(N.g)();Object(i.useEffect)((function(){a(J),u(B),O(W),w(W)}),[J,B]);var X=function(n){var e=!0;return n.forEach((function(n){n.selected!==n.spaces.length&&(e=!1)})),e},Z=function(n,e,t,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=!1,s=0,o=!1,d=n;return r?e.forEach((function(n,r){var o=n;n.spaces.forEach((function(u){i===u&&(s=r,o.selected=n.selected+1,n.selected===n.spaces.length?(d[t].status="destroyed",c=!0,A("A ".concat(e[s].name," has just been destroyed")),a&&(V.current=!1)):(d[t].status="hit",A("A ".concat(e[s].name," has just been hitten")),a&&(V.current=!0)))}))})):(d[t].status="missed",A("Shot missed!")),c&&(e[s].spaces.forEach((function(e){n.forEach((function(n){var t=n;n.cellContent===e&&(t.status="destroyed")}))})),o=X(e)),P(!0),{allDestroyed:o,shipsToModifie:e,gridToModifie:n}},$=function(n){z({type:g,payload:n}),Q.push("/end")},nn=function n(){var e=JSON.parse(JSON.stringify(t)),r=JSON.parse(JSON.stringify(m)),i=function(){var n=0,e={1:L.current+1,2:L.current-1,3:L.current+10,4:L.current-10};return!1===V.current?n=Math.floor(99*Math.random()):K.current>Object.keys(e).length?(L.current=q.current,K.current=0,n=e[K.current+1]):(n=e[K.current+1],K.current+=1),n}();if(void 0!==e[i]&&"hit"!==e[i].status&&"destroyed"!==e[i].status&&"missed"!==e[i].status){var c=!1;"sea"!==e[i].cellContent&&(L.current=i,c=!0,K.current=0),V.current||(q.current=i,K.current=0);var s=Z(e,r,i,c,e[i].cellContent,!0),o=s.allDestroyed,d=void 0!==o&&o,u=s.shipsToModifie,l=void 0===u?[]:u,b=s.gridToModifie,h=void 0===b?[]:b;d&&$("CPU"),O(l),a(h),setTimeout((function(){j(!0),F(!0)}),1e3)}else n()};return Object(r.jsxs)(Y,{children:[Object(r.jsx)("div",{"data-testid":"popUp-container",children:Object(r.jsx)(H,{copy:C,show:G,hidePopUp:function(){P(!1)}})}),Object(r.jsxs)("div",{className:"title",children:[Object(r.jsx)("h1",{children:"Now play!"}),Object(r.jsx)("h3",{children:"BattleShip"})]}),Object(r.jsx)("div",{className:"player-turn",children:Object(r.jsxs)("p",{children:["Player:",D?I:"CPU"]})}),Object(r.jsxs)("div",{className:"grids-container",children:[Object(r.jsx)("div",{className:"first-column",children:Object(r.jsxs)("div",{"data-testid":"grid-container-computer",className:"grid-container",children:[Object(r.jsx)("p",{className:"grid-name",children:"CPU"}),Object(r.jsx)(_,{"data-testid":"grid-grid",enableGrid:!1,grid:t,gridName:"user"})]})}),Object(r.jsx)("div",{className:"second-column",children:Object(r.jsxs)("div",{"data-testid":"grid-container-user",className:"grid-container",children:[Object(r.jsx)("p",{className:"grid-name",children:I}),Object(r.jsx)(_,{onClickCell:function(n){return function(n){var e=n.id,t=void 0===e?0:e,r=n.status,i=void 0===r?"empty":r,a=n.taken,c=void 0!==a&&a,s=n.cellContent,o=void 0===s?"sea":s;if("hit"!==i&&"missed"!==i&&"destroyed"!==i){var l=!1;c&&(l=!0);var b=JSON.parse(JSON.stringify(d)),h=JSON.parse(JSON.stringify(y)),p=Z(b,h,t,l,o),f=p.allDestroyed,m=void 0!==f&&f,g=p.shipsToModifie,O=void 0===g?[]:g,x=p.gridToModifie,v=void 0===x?[]:x;m&&$(I),w(O),u(v),j(!1),F(!1),setTimeout((function(){nn()}),2e3)}}(n)},"data-testid":"grid-grid",enableGrid:h,grid:d,gridName:"user"})]})})]}),Object(r.jsx)("div",{className:"button-row",children:Object(r.jsx)("div",{className:"button-container",children:Object(r.jsx)("button",{"data-testid":"surrender-button",type:"button",onClick:function(){return $("CPU")},children:"Surrender"})})})]})};function K(){var n=Object(S.a)(["\nwidth: 90%;\nmax-width: 1240px;\nmargin: 0 auto;\ndisplay: flex;\nflex-direction: column;\njustify-content: center;\nalign-items: center;\ntext-align: center;\nheight: 100vh;\n\n  .winner-container {\n    width: 300px;\n    height: 200px;\n    \n\n    .winner {\n      font-size: 30px;\n      text-align: center;\n    }\n  }\n"]);return K=function(){return n},n}var Q=C.b.div(K()),X=function(){var n=Object(o.c)((function(n){return n.winner}));return Object(r.jsx)(Q,{"data-testid":"end-game-container",children:Object(r.jsxs)("div",{className:"winner-container",children:[Object(r.jsx)("p",{className:"winner",children:"The winner is:"}),Object(r.jsx)("p",{className:"winner",children:n})]})})},Z=function(){return Object(r.jsx)(w.a,{children:Object(r.jsxs)(N.d,{children:[Object(r.jsx)(N.b,{exact:!0,path:"/",component:W}),Object(r.jsx)(k,{exact:!0,path:"/game",component:q}),Object(r.jsx)(k,{exact:!0,path:"/end",component:X})]})})};function $(){var n=Object(S.a)(["\n  *{\n    margin: 0;\n    padding: 0;\n    list-style: none;\n    text-decoration: none;\n    border: none;\n    outline: none;\n    background-color: transparent;\n    box-sizing: border-box;\n    color: ",";\n  }\n\n  ol, ul {\n    list-style: none;\n  }\n\n  p {\n    color: ","\n  }\n\n  button {\n    border: 2px solid ",";\n    border-radius: 5px;\n    padding: 10px;\n    margin: 10px 0;\n    width: 100%;\n    text-transform: uppercase;\n\n    &.dark {\n      background-color: ",";\n      color: ","\n    }\n  }\n"]);return $=function(){return n},n}var nn=Object(C.a)($(),A.grey,A.grey,A.grey,A.grey,A.white),en=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(nn,{}),Object(r.jsx)(o.a,{store:y,children:Object(r.jsx)(Z,{})})]})};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(en,{})}),a.a.document.getElementById("root"))}},[[498,1,2]]]);
//# sourceMappingURL=main.227fb83f.chunk.js.map